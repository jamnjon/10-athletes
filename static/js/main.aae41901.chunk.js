(this["webpackJsonpten-athletes-client"]=this["webpackJsonpten-athletes-client"]||[]).push([[0],{33:function(e,t,a){e.exports=a(60)},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(31),s=a.n(i),o=a(11),l=a(12),c=a(14),u=a(13),p=a(1),h=a.n(p),d=a(8),m=a(2),g=a(6),f=a(3),E=a(5),v=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={sports:[],users:[],sport:"",opponent:"",sportMatches:[],opponentMatches:[],sportID:0,opponentID:0,initial:"",opponentRating:0,error:"",opponentName:"",opponentUsername:""},n.handleChange=n.handleChange.bind(Object(E.a)(n)),n.fillSportName=n.fillSportName.bind(Object(E.a)(n)),n.fillOpponent=n.fillOpponent.bind(Object(E.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n.findSports=n.findSports.bind(Object(E.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=h.a.get("http://localhost:3001/sports",{withCredentials:!0}),a=h.a.get("http://localhost:3001/users",{withCredentials:!0});h.a.all([t,a]).then(h.a.spread((function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var r=a[0].data.sports,i=a[1].data.users;e.setState({sports:r,users:i})})))}},{key:"handleChange",value:function(e){var t,a=Object(f.a)(this.state.sportMatches),n=Object(f.a)(this.state.opponentMatches);"sport"===e.target.name?a=this.findSports(e.target.value):"opponent"===e.target.name&&(n=this.findOpponent(e.target.value)),this.setState((t={},Object(g.a)(t,e.target.name,e.target.value),Object(g.a)(t,"sportMatches",a),Object(g.a)(t,"opponentMatches",n),t))}},{key:"findSports",value:function(e){var t=[];if(e.length>=3){var a=this.state.sports,n=this.props.user;a.forEach((function(a,r){var i,s=!1;Object(f.a)(Array(a.name.length-e.length+1>0?a.name.length-e.length+1:0)).forEach((function(o,l){if(i=0,Object(f.a)(Array(e.length)).forEach((function(t,n){e[n].toUpperCase()!==a.name[l+n].toUpperCase()&&(i+=1)})),i<2){var c=!1;if(t.forEach((function(e){a.id===e.id&&(c=!0)})),!c&&10!==a.id){s=!0;var u=0;a.participants.forEach((function(e){e.id===n.id&&(u=e.rating)})),t.push({name:a.name,id:a.id,participants:a.participants,listPos:r,rating:u})}}})),a.alternate_name&&!s&&Object(f.a)(Array(a.alternate_name.length-e.length+1>0?a.alternate_name.length-e.length+1:0)).forEach((function(s,o){if(i=0,Object(f.a)(Array(e.length)).forEach((function(t,n){e[n].toUpperCase()!==a.alternate_name[o+n].toUpperCase()&&(i+=1)})),i<2){var l=!1;if(t.forEach((function(e){a.id===e.id&&(l=!0)})),!l&&10!==a.id){var c=0;a.participants.forEach((function(e){e.id===n.id&&(c=e.rating)})),t.push({name:a.name,id:a.id,participants:a.participants,listPos:r,rating:c})}}})),a.id}))}return t}},{key:"fillSportName",value:function(e){var t=0,a=-2;this.props.user.sports.forEach((function(n){n.id===parseInt(e.target.attributes[1].value)&&(t=n.rating,a=n.gamesPlayed)}));var n=[{name:e.target.attributes[2].value,id:parseInt(e.target.attributes[1].value),participants:this.state.sports[e.target.attributes[3].value].participants,listPos:e.target.attributes[3].value,rating:t}];this.setState({sport:e.target.attributes[2].value,sportID:parseInt(e.target.attributes[1].value),sportPos:e.target.attributes[2].value,sportMatches:n,opponentPlaceholder:"Opponent",backgroundColor:"white",currentUserRating:t,currentUserGamesPlayed:a,error:""})}},{key:"findOpponent",value:function(e){var t=0!==this.state.sportID,a=this.props.user.id,n=[];e.length>=3&&this.state.users.forEach((function(r){var i="".concat(r.firstname," ").concat(r.lastname),s=!1;Array.from(Array(i.length-e.length+1>0?i.length-e.length+1:0).keys()).forEach((function(o){if(s=!1,Object(f.a)(Array(e.length)).forEach((function(t,a){e[a].toUpperCase()!==i[o+a].toUpperCase()&&(s=!0)})),!s){var l=!1;if(n.forEach((function(e){e.id===r.id&&(l=!0)})),!l&&r.id!==a){var c=0;t&&r.sports.forEach((function(e){e.id===t&&(c=e.rating)})),n.push({username:r.username,name:i,id:r.id,sports:r.sports,events:r.events,rating:c})}}})),Array.from(Array(r.username.length-e.length+1>0?r.username.length-e.length+1:0).keys()).forEach((function(o,l){s=!1;for(var c=0;c<e.length;c++)e[c].toUpperCase()!==r.username[l+c].toUpperCase()&&(s=!0);if(!s){var u=!1;if(n.forEach((function(e){e.id===r.id&&(u=!0)})),!u&&r.id!==a){var p=0;t&&r.sports.forEach((function(e){e.id===t&&(p=e.rating)})),n.push({username:r.username,name:i,id:r.id,sports:r.sports,events:r.events,rating:p})}}}))}));return n}},{key:"fillOpponent",value:function(e){var t=this,a=0;this.state.users.forEach((function(n){n.id===e.target.attributes[0].value&&n.sports.forEach((function(e){e.id===t.state.sportID&&(a=e.rating)}))})),this.setState({opponent:e.target.attributes[1].value,opponentID:parseInt(e.target.attributes[0].value),opponentRating:a,opponentName:e.target.attributes[1].value,opponentUsername:e.target.attributes[2].value})}},{key:"ratingChange",value:function(e){var t,a=this,n=this.state,r=n.sportMatches,i=n.opponentMatches,s=n.initial,o=n.winner,l=n.sports,c=n.sportID,u=-5,p=-5;t=i.length>0?i[0].id:this.state.opponentID,r.length>0?u=0===r[0].rating?s:r[0]:l.forEach((function(e){e.id===c&&(e.participants.forEach((function(e){e.id===a.props.user.id?u=e.rating:e.id===t&&(p=e.rating)})),-5===u&&(u=s))})),-5===p&&(p=u),console.log("currentuserrating: ".concat(u)),console.log("opponentRating: ".concat(p));var h=Math.abs(u-p)/2+1;if(u>p)var d="1";else d="2";d===o?h=.05/h:h*=.05;var m,g=[],f=0;if(1===e){if(g.push(t),console.log(this.props.user.events),this.props.user.events.forEach((function(e){if(e.sport===a.state.sportID){f=e.p2ID===a.props.user.id?e.p1ID:e.p2ID;var t=!1;g.length<5&&(g.forEach((function(e){e===f&&(t=!0)})),t||g.push(f))}})),g.length<5&&(h*=6-g.length),"1"===o){if(parseFloat(u)+parseFloat(h)>10&&g.length<5)return 10;if(parseFloat(u)>=10)h/=2;else if(parseFloat(u)+parseFloat(h)>10)return(parseFloat(u)+parseFloat(h)-10)/2+10;return parseFloat(u)+parseFloat(h)}if(u-h<1)return 1;if(u>10){if(u-h/2>10)return u-h/2;var E=10-(u-h/2);return 10-2*E}return u-h}if(2===e){if(g.push(this.props.user.id),this.state.users.forEach((function(e){e.id===t&&(m=e)})),m.events.forEach((function(e){if(e.sport===a.state.sportID){f=e.p2ID===a.state.opponentID?e.p1ID:e.p2ID;var t=!1;g.length<5&&(g.forEach((function(e){e===f&&(t=!0)})),t||g.push(f))}})),g.length<5&&(h*=6-g.length),"2"===o){if(parseFloat(p)+h>10)return 10;if(parseFloat(p)>=10)h/=2;else if(parseFloat(p)+parseFloat(h)>10)return(parseFloat(p)+parseFloat(h)-10)/2+10;return parseFloat(p)+h}return p-h<1?1:p>10?p-h/2>10?p-h/2:10-2*(E=10-(p-h/2)):p-h}}},{key:"addEventsToEventsDatabase",value:function(e){var t=this.state.winner;return h.a.post("http://localhost:3001/events",{sport:parseFloat(e.sport),p1ID:this.props.user.id,p1InitialRating:e.p1InitialRating,p2ID:e.p2ID,p2InitialRating:e.p2InitialRating,winner:t},{withCredentials:!0})}},{key:"updateCurrentUser",value:function(e,t){var a=this,n=this.state.winner,r="http://localhost:3001/users/"+(1===t?this.props.user.id:e.p2ID),i={sport:e.sport,sportName:e.sportName,p1ID:this.props.user.id,p1Name:e.p1Name,p1Username:e.p1Username,p1InitialRating:parseFloat(e.p1InitialRating),p2ID:e.p2ID,p2Name:e.p2Name,p2Username:e.p2Username,winner:n},s={username:this.props.user.username};h.a.patch(r,{newEvent:i,user:s},{withCredentials:!0}).then((function(t){t.data.updated&&a.props.history.push("/profile",{detail:e.sport,winner:n})}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.opponentMatches,r=a.sportMatches,i=a.opponentID,s=a.sportID,o=a.sports,l=a.opponentName,c=a.opponentUsername;if((n.length>0||0!==i)&&(r.length>0||0!==s)){var u,p,h,d,m;if(n.length>0?(h=n[0].id,l=n[0].name,c=n[0].username):h=i,r.length>0){u=r[0].id,m=r[0].name;var g=!1,f=!1;r[0].participants.forEach((function(e){t.props.user.id===e.id?(p=e.rating,g=!0):h===e.id&&(d=e.rating,f=!0)})),g||(p=this.state.initial),f||(d=p)}else u=s,o.forEach((function(e){if(e.id===s){var a=!1,n=!1;e.participants.forEach((function(e){e.id===t.props.user.id?(p=e.rating,a=!0):e.id===h&&(d=e.rating,n=!0)})),a||(p=t.state.initial),n||(d=p)}}));if(void 0===p)this.setState({error:"You need to set an initial skill level."});else{var E={sport:u,p1ID:this.props.user.id,p1Name:this.props.user.firstname+" "+this.props.user.lastname,p1Username:this.props.user.username,p1InitialRating:p,p2ID:h,p2Name:l,p2Username:c,p2InitialRating:d,sportName:m};this.addEventsToEventsDatabase(E),this.updateCurrentUser(E,1)}}else this.setState({error:"You need to select a valid opponent and a valid sport."})}},{key:"render",value:function(){var e=[],t=[],a="",n=!1;return this.state.sportMatches.forEach((function(t){0!==t.rating&&(n=!0),e.push(r.a.createElement("li",{className:"sportsListItem","data-sportid":t.id,style:{listStyle:"none"},key:"sport".concat(t.id),sport:t.name,arrayposition:t.listPos},t.name," ",n?" - ".concat(t.rating.toFixed(2)):""))})),this.state.sportMatches.length>=1&&0===this.state.sportMatches[0].rating&&(a=r.a.createElement("div",null,r.a.createElement("h3",null,"Rate Your ",this.state.sportMatches[0].name," Skill Level Between 1 and 10:"),r.a.createElement("input",{type:"number",name:"initial",value:this.state.initial,onChange:this.handleChange,placeholder:"Set Skill Level 1-10",step:".5",min:"1.0",max:"10.00000000000000",required:!0}))),this.state.opponentMatches&&this.state.opponentMatches.forEach((function(e){t.push(r.a.createElement("li",{"data-opponentid":e.id,style:{listStyle:"none"},key:e.id,opponent:e.name,username:e.username},e.name," ",0===e.rating?"":"- ".concat(e.rating.toFixed(2))))})),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("br",null),r.a.createElement("u",null,r.a.createElement("h2",null," Report Results ")),r.a.createElement("br",null),r.a.createElement("h3",null,"Sport"),r.a.createElement("input",{type:"name",name:"sport",placeholder:"Sport Name",value:this.state.sport,onChange:this.handleChange,minLength:"3",required:!0}),r.a.createElement("ul",{className:"sportSearchList",onClick:this.fillSportName},e),a,r.a.createElement("br",null),r.a.createElement("h3",null,"Opponent"),r.a.createElement("input",{type:"text",name:"opponent",minLength:"3",style:{backgroundColor:this.state.backgroundColor},placeholder:"Opponent Name",value:this.state.opponent,onChange:this.handleChange,required:!0}),r.a.createElement("ul",{className:"opponentSearchList",onClick:this.fillOpponent},t),r.a.createElement("br",null),r.a.createElement("h3",null," Who won?"),r.a.createElement("input",{type:"radio",id:"I won",name:"winner",onClick:this.handleChange,value:"1"})," ",r.a.createElement("b",null,"I won"),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",id:"I lose",name:"winner",onClick:this.handleChange,value:"2"})," ",r.a.createElement("b",null,"I lost"),r.a.createElement("br",null),r.a.createElement("br",null),this.state.error,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{style:{width:"200px",height:"42px",fontSize:"larger"},type:"submit"},"Submit"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)))}}]),a}(n.Component),b=function(e){return e.loggedInStatus?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",{className:"welcome"},"Welcome to 10 Athletes ",e.user.username),r.a.createElement(v,{history:e.history,user:e.user})):(e.history.push("/rankings"),r.a.createElement("div",null))},y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(g.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a={usernameOrEmail:t.usernameOrEmail,password:t.password};h.a.post("http://localhost:3001/login",{user:a},{withCredentials:!0}).then((function(e){e.data.logged_in?(n.props.handleLogin(e.data),n.redirect()):n.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},n.redirect=function(){n.props.history.push("/profile")},n.handleErrors=function(){return r.a.createElement("div",null,r.a.createElement("ul",null,n.state.errors.map((function(e){return r.a.createElement("li",{key:e},e)}))))},n.state={email:"",password:"",errors:"",usernameOrEmail:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("http://localhost:3001/logged_in",{withCredentials:!0}).then((function(t){t.data.logged_in&&e.redirect()}))}},{key:"render",value:function(){var e=this.state,t=e.usernameOrEmail,a=e.password;return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("h1",null,"Log In"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"Username or Email",type:"text",name:"usernameOrEmail",value:t,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"password",type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("button",{placeholder:"submit",type:"submit"},"Log In"),r.a.createElement("div",null,"or ",r.a.createElement(d.b,{to:"/signup"},"Sign Up"))),r.a.createElement("div",null,this.state.errors?this.handleErrors():null)))}}]),a}(n.Component),S=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(g.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a={username:t.username,email:t.email,firstname:t.firstname,lastname:t.lastname,password:t.password,password_confirmation:t.password_confirmation};h.a.post("http://localhost:3001/users",{user:a},{withCredentials:!0}).then((function(e){"created"===e.data.status?(n.props.handleLogin(e.data),n.redirect()):n.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},n.redirect=function(){n.props.history.push("/profile")},n.handleErrors=function(){return r.a.createElement("div",null,r.a.createElement("ul",null,n.state.errors.map((function(e){return r.a.createElement("li",{key:e},e)}))))},n.state={username:"",email:"",password:"",password_confirmation:"",errors:"",firstname:"",lastname:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("http://localhost:3001/logged_in",{withCredentials:!0}).then((function(t){t.data.logged_in&&e.redirect()}))}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.firstname,i=e.lastname,s=e.password,o=e.password_confirmation;return this.props.loggedInStatus&&this.redirect(),r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"username",type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"First Name",type:"text",name:"firstname",value:n,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"Last Name",type:"text",name:"lastname",value:i,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"email",type:"text",name:"email",value:a,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"password",type:"password",name:"password",value:s,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"password confirmation",type:"password",name:"password_confirmation",value:o,onChange:this.handleChange}),r.a.createElement("button",{placeholder:"submit",type:"submit"},"Sign Up"),r.a.createElement("div",null,"or ",r.a.createElement(d.b,{to:"/login"},"Log In"))),r.a.createElement("div",null,this.state.errors?this.handleErrors():null))}}]),a}(n.Component),C=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={user:{},rating:"",sport:"",sportID:0,sportMatches:[],error:"",changed:0,winner:"0",ratingChange:0},n.handleChange=n.handleChange.bind(Object(E.a)(n)),n.fillSportName=n.fillSportName.bind(Object(E.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={},a=0,n="0",r=0,i=h.a.get("http://localhost:3001/sports",{withCredentials:!0}),s=h.a.get("http://localhost:3001/logged_in",{withCredentials:!0});h.a.all([i,s]).then(h.a.spread((function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];var l=s[0].data.sports;s[1].data.logged_in?t=s[1].data.user:e.props.history.push("/rankings"),e.props.location.state&&(a=e.props.location.state.detail,n=e.props.location.state.winner,t.events&&t.sports.forEach((function(e){e.id===a&&(r=Math.abs(e.rating-t.events[t.events.length-1].p1InitialRating).toFixed(3))}))),e.setState({sports:l,user:t,changed:a,winner:n,ratingChange:r})})))}},{key:"sortedSportsList",value:function(){var e,t=[],a=[],n=[];return this.state.user.sports.forEach((function(r){10!==r.id&&r.opponents.length>=5?t.push(r):10!==r.id&&r.opponents.length>0?a.push(r):10!==r.id?n.push(r):e=r})),[e].concat(this.quickSort(t),[""],this.quickSort(a),[""],this.quickSort(n))}},{key:"quickSort",value:function(e){if(e.length<=1)return e;for(var t=[],a=[],n=e.length-1,r=e[n],i=0;i<n;i++)e[i].rating>=r.rating?t.push(e[i]):a.push(e[i]);return[].concat(this.quickSort(t),r,this.quickSort(a))}},{key:"handleChange",value:function(e){var t,a=Object(f.a)(this.state.sportMatches);"sport"===e.target.name&&(a=this.findSports(e.target.value)),this.setState((t={},Object(g.a)(t,e.target.name,e.target.value),Object(g.a)(t,"sportMatches",a),t))}},{key:"findSports",value:function(e){var t=[];if(e.length>=3){var a=this.state.sports,n=this.props.user;a.forEach((function(a,r){var i,s=!1;Object(f.a)(Array(a.name.length-e.length+1>0?a.name.length-e.length+1:0)).forEach((function(r,o){if(i=0,Object(f.a)(Array(e.length)).forEach((function(t,n){e[n].toUpperCase()!==a.name[o+n].toUpperCase()&&(i+=1)})),i<2){var l=!1;if(t.forEach((function(e){a.id===e.id&&(l=!0)})),!l&&10!==a.id){s=!0;var c=!1;a.participants.forEach((function(e){e.id===n.id&&(c=!0)})),c||t.push({name:a.name,id:a.id})}}})),a.alternate_name&&!s&&Object(f.a)(Array(a.alternate_name.length-e.length+1>0?a.alternate_name.length-e.length+1:0)).forEach((function(r,s){if(i=0,Object(f.a)(Array(e.length)).forEach((function(t,n){e[n].toUpperCase()!==a.alternate_name[s+n].toUpperCase()&&(i+=1)})),i<2){var o=!1;if(t.forEach((function(e){a.id===e.id&&(o=!0)})),!o&&10!==a.id){var l=!1;a.participants.forEach((function(e){e.id===n.id&&(l=!0)})),l||t.push({name:a.name,id:a.id})}}}))}))}return t}},{key:"fillSportName",value:function(e){var t=[{name:e.target.attributes[2].value,id:e.target.attributes[1].value}];this.setState({sport:e.target.attributes[2].value,sportID:e.target.attributes[1].value,sportMatches:t})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a,n=this.state,r=n.sportMatches,i=n.rating,s=n.sportID,o=n.sport,l={id:this.state.user.id,rating:parseFloat(i),playerName:this.state.user.firstname+" "+this.state.user.lastname,username:this.state.user.username},c="";if(r.length>0){var u=r[0].id;a={id:r[0].id,name:r[0].name,rating:parseFloat(i)}}else 0!==s?(u=s,a={id:s,name:o,rating:parseFloat(i)}):(c="Invalid sport name. Verify that you don't already have a rating and haven't misspelled the name of the sport.",this.setState({error:c}));if(""===c){var p="http://localhost:3001/users/"+this.state.user.id,d="http://localhost:3001/sports/"+u;h.a.all([h.a.patch(p,{newSport:a}),h.a.patch(d,{newUserInSport:l})]).then(h.a.spread((function(){h.a.get("http://localhost:3001/logged_in",{withCredentials:!0}).then((function(e){var a=e.data.user;t.setState({sportMatches:[],rating:"",sport:"",error:"",changed:u,winner:"0",user:a})}))})))}}},{key:"render",value:function(){var e,t,a=this,n=[],i="",s=[],o="",l=!1,c=!1;this.state.user.sports&&this.state.user.sports.length>0&&this.sortedSportsList().forEach((function(s,u){var p="black",h="normal",d="inherit";if(s)if(s.id===a.state.changed?(h="bold",d="larger","1"===a.state.winner?(p="green",o="+(".concat(a.state.ratingChange,")")):"2"===a.state.winner?(p="red",o="(-".concat(a.state.ratingChange,")")):p="blue"):o="",0===u&&n.push(""),""===s)n.push(r.a.createElement("br",{key:"skip".concat(u)}));else{if(10===s.id&&!0===s.official||10!==s.id&&s.opponents.length>=5)e="",d="larger",10!==s.id&&n.push(r.a.createElement("div",{className:"officialSportsPlayedListItem","data-sportid":s.id,key:"sport".concat(s.id),sport:s.name,style:{fontWeight:"bold",color:p,fontSize:d}},s.name,": ","".concat(s.rating.toFixed(2))," ",o));else if(10!==s.id){e="*",t=s.opponents.length>1?"s":"";var m=r.a.createElement("div",null,r.a.createElement("span",null,s.name,": ",s.rating.toFixed(2),e," ",o),r.a.createElement("span",{style:{float:"right"}},s.opponents.length," opponent",t," played"));s.opponents.length>0?l||(l=!0,n.push(r.a.createElement("h3",{key:"unofficial"},"Unofficial Sports: play 5 or more opponents to earn an official rating."))):(c||(c=!0,n.push(r.a.createElement("h3",{key:"initial"},"Initial Rating Only")),t="s"),m=r.a.createElement("div",null,s.name,": ",s.rating.toFixed(2),e," ",o)),n.push(r.a.createElement("div",{className:"sportsPlayedListItem","data-sportid":s.id,key:"sport".concat(s.id),style:{color:p,fontWeight:h,fontSize:d},sport:s.name},m))}10===s.id&&(i=r.a.createElement("h2",{className:"AthleteRating",key:s.id},"Athlete Rating: ",s.rating.toFixed(2),e,e))}}));return this.state.sportMatches.forEach((function(e){s.push(r.a.createElement("div",{className:"sportsListItem",id:e.id,key:"sport".concat(e.id),name:e.name},e.name))})),r.a.createElement("div",null,r.a.createElement("h1",{style:{textAlign:"center"}},this.state.user.username,"'s Profile"),r.a.createElement("ul",{style:{paddingLeft:"10%",paddingRight:"30%"}},i,n),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("h3",null,"Pick a sport that you want to play and set your initial rating out of 10."),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"name",name:"sport",placeholder:"Sport Name",value:this.state.sport,onChange:this.handleChange,required:!0}),r.a.createElement("input",{type:"number",step:".5",name:"rating",min:"1.0",max:"10.00000000000",placeholder:"Rating out of 10",value:this.state.rating,onChange:this.handleChange,required:!0}),r.a.createElement("div",{className:"sportSearchList",onClick:this.fillSportName},s),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Add Rating"),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("h3",{style:{color:"red"}},this.state.error)),r.a.createElement("br",null),r.a.createElement("h4",null,"* : Unofficial rating. You must play at least five unique opponents in a sport before your rating is official.",r.a.createElement("br",null),"** : For your athlete rating to be official you must have at least one official sport.")))}}]),a}(n.Component),k=function(e){return e.loggedInStatus?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(d.b,{to:"/logout",onClick:function(){h.a.delete("http://localhost:3001/logout",{withCredentials:!0}).then((function(t){e.handleLogout(),e.history.push("/rankings")})).catch((function(e){return console.log(e)}))}},r.a.createElement("button",{style:{backgroundColor:"#EFEFEF",color:"black"}},"Log Out")),r.a.createElement(d.b,{to:"/",onClick:function(){e.history.push("/")}},r.a.createElement("button",{style:{backgroundColor:"/"===e.location.pathname?"blue":"#EFEFEF",color:"/"===e.location.pathname?"white":"black"}},"Submit Results")),r.a.createElement(d.b,{to:"/profile",onClick:function(){e.history.push("/profile")}},r.a.createElement("button",{style:{backgroundColor:"/profile"===e.location.pathname?"blue":"#EFEFEF",color:"/profile"===e.location.pathname?"white":"black"}},"Profile")),r.a.createElement(d.b,{to:"/rankings",onClick:function(){e.history.push("/rankings")}},r.a.createElement("button",{style:{backgroundColor:"/rankings"===e.location.pathname?"blue":"#EFEFEF",color:"/rankings"===e.location.pathname?"white":"black"}},"Rankings"))):r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement(d.b,{to:"/login",style:{fontSize:"large"}},"Log In"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(d.b,{to:"/signup",style:{fontSize:"large"}},"Sign Up")))},I=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={sports:[],user:{},sport:"",sportMatches:[],sportID:10,unsetID:0,official:"2"},n.handleChange=n.handleChange.bind(Object(E.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n.fillSportName=n.fillSportName.bind(Object(E.a)(n)),n.findSports=n.findSports.bind(Object(E.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={},a=h.a.get("http://localhost:3001/sports",{withCredentials:!0}),n=h.a.get("http://localhost:3001/logged_in",{withCredentials:!0});h.a.all([a,n]).then(h.a.spread((function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];var i=n[0].data.sports;n[1].data.logged_in&&(t=n[1].data.user),e.setState({sports:i,user:t})})))}},{key:"handleChange",value:function(e){var t,a=Object(f.a)(this.state.sportMatches);"sport"===e.target.name&&(a=this.findSports(e.target.value)),this.setState((t={},Object(g.a)(t,e.target.name,e.target.value),Object(g.a)(t,"sportMatches",a),t))}},{key:"findSports",value:function(e){var t=[],a=this.state.sportID;e.length>=3&&this.state.sports.forEach((function(n,r){var i,s=!1;Object(f.a)(Array(n.name.length-e.length+1>0?n.name.length-e.length+1:0)).forEach((function(r,o){if(i=0,Object(f.a)(Array(e.length)).forEach((function(t,a){e[a].toUpperCase()!==n.name[o+a].toUpperCase()&&(i+=1)})),i<2){var l=!1;t.forEach((function(e){n.id===e.id&&(l=!0)})),l||n.id===a||(s=!0,t.push({name:n.name,id:n.id}))}})),n.alternate_name&&!s&&Object(f.a)(Array(n.alternate_name.length-e.length+1>0?n.alternate_name.length-e.length+1:0)).forEach((function(r,s){if(i=0,Object(f.a)(Array(e.length)).forEach((function(t,a){e[a].toUpperCase()!==n.alternate_name[s+a].toUpperCase()&&(i+=1)})),i<2){var o=!1;t.forEach((function(e){n.id===e.id&&(o=!0)})),o||n.id===a||t.push({name:n.name,id:n.id})}}))}));return t}},{key:"fillSportName",value:function(e){var t=[{name:e.target.attributes[2].value,id:e.target.attributes[1].value}];this.setState({sport:e.target.attributes[2].value,unsetID:parseInt(e.target.attributes[1].value),sportMatches:t})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.state.sports.forEach((function(e){e.id===t.state.unsetID?t.setState({sportID:e.id,unsetID:0}):0===t.state.unsetID&&t.state.sportMatches.length>0&&t.setState({sportID:t.state.sportMatches[0].id})}))}},{key:"quickSort",value:function(e){if(e.length<=1)return e;for(var t=[],a=[],n=e[e.length-1],r=e.length-1,i=0;i<r;i++)e[i].rating>=n.rating?t.push(e[i]):a.push(e[i]);return[].concat(this.quickSort(t),n,this.quickSort(a))}},{key:"render",value:function(){var e=this,t=[],a="",n="",i="1"===this.state.official?"Unofficial ":"",s=[];return this.state.sportMatches.length>0&&(a=this.state.sportMatches[0].name),this.state.sports.forEach((function(i,o){i.id===e.state.sportID&&(n=i.name,e.quickSort(i.participants).forEach((function(a){var n="normal";a.id===e.state.user.id&&(n="bold");var s="*";(10!==i.id&&a.opponents.length>=5||10===i.id&&a.official)&&(s=""),("2"===e.state.official&&(10!==i.id&&a.opponents.length>=5||10===i.id&&a.official)||"1"===e.state.official)&&t.push(r.a.createElement("li",{style:{fontWeight:n},key:a.id},r.a.createElement("div",{style:{float:"left"}},a.name),r.a.createElement("div",{style:{float:"right"}},s,a.rating.toFixed(2))))})));if(i.id===e.state.unsetID){var l=!1;e.state.sportMatches.forEach((function(t){parseInt(t.id)===e.state.unsetID&&(l=!0)})),l||s.push(r.a.createElement("div",{className:"sportsListItem",id:i.id,key:"sport".concat(i.id),name:i.name},i.name)),a=i.name}})),""===a&&(a=n),this.state.sportMatches.forEach((function(e){s.push(r.a.createElement("div",{className:"sportsListItem",id:e.id,key:"sport".concat(e.id),name:e.name},e.name))})),r.a.createElement("div",null,r.a.createElement("form",{style:{float:"left",paddingLeft:"5%"}},r.a.createElement("br",null),r.a.createElement("h3",null,"Sport:"),r.a.createElement("input",{type:"name",name:"sport",placeholder:"Sport Name",value:this.state.sport,onChange:this.handleChange,required:!0}),r.a.createElement("ul",{className:"sportSearchList",onClick:this.fillSportName},s),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",id:"Not Included",defaultChecked:"checked",name:"official",onClick:this.handleChange,value:"2"})," ",r.a.createElement("b",null,"Official"),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",id:"Included",name:"official",onClick:this.handleChange,value:"1"})," ",r.a.createElement("b",null,"Unofficial"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",onClick:this.handleSubmit},"See ",a," Rankings"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("h1",{style:{textAlign:"center",paddingLeft:"30%",paddingRight:"30%"}},i,n," Rankings"),r.a.createElement("ol",{style:{paddingLeft:"30%",paddingRight:"30%"}}," ",t," "))}}]),a}(n.Component),O=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).loginStatus=function(){h.a.get("http://localhost:3001/logged_in",{withCredentials:!0}).then((function(e){e.data.logged_in?n.handleLogin(e.data):n.handleLogout()})).catch((function(e){return console.log("api errors:",e)}))},n.handleLogin=function(e){n.setState({isLoggedIn:!0,user:e.user})},n.handleLogout=function(){n.setState({isLoggedIn:!1,user:{}})},n.state={isLoggedIn:!1,user:{}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loginStatus()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement(m.a,{path:"",render:function(t){return"/login"!==t.location.pathname&&"/signup"!==t.location.pathname&&r.a.createElement(k,Object.assign({},t,{user:e.state.user,handleLogout:e.handleLogout,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(b,Object.assign({},t,{user:e.state.user,handleLogout:e.handleLogout,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(m.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(y,Object.assign({},t,{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(m.a,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(S,Object.assign({},t,{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(m.a,{exact:!0,path:"/profile",render:function(t){return r.a.createElement(C,Object.assign({},t,{user:e.state.user,handleLogout:e.handleLogout,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(m.a,{exact:!0,path:"/rankings",render:function(t){return r.a.createElement(I,Object.assign({},t,{user:e.state.user,handleLogout:e.handleLogout,loggedInStatus:e.state.isLoggedIn}))}}))))}}]),a}(n.Component);s.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.aae41901.chunk.js.map